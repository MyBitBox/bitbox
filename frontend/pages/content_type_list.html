<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìŠµ ìœ í˜• ì„ íƒ - BitBox</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="../js/auth.js" defer></script>
</head>

<body>
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="../index.html">
                    <h1>BitBox</h1>
                </a>
            </div>
            <div class="nav-links">
                <!-- ì—¬ê¸°ëŠ” ë¹„ì›Œë‘¡ë‹ˆë‹¤. JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </nav>
    </header>

    <main class="main">
        <section class="content-type-section">
            <div class="section-header">
                <h2>í•™ìŠµ ìœ í˜• ì„ íƒ</h2>
                <p>ì›í•˜ëŠ” í•™ìŠµ ìœ í˜•ì„ ì„ íƒí•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”</p>
            </div>
            <div id="contentTypeGrid" class="content-type-grid">
                <!-- ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¹´ë“œê°€ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 BitBox. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // ì½˜í…ì¸  íƒ€ì…ë³„ ì•„ì´ì½˜ ë§¤í•‘
        const typeIcons = {
            'quiz': 'ğŸ“',
            'codingtest': 'ğŸ’»',
            'interview': 'ğŸ¯'
        };

        // ì½˜í…ì¸  íƒ€ì…ë³„ í•œê¸€ ì´ë¦„ ë§¤í•‘
        const typeNames = {
            'quiz': 'ê°ê´€ì‹ í€´ì¦ˆ',
            'codingtest': 'ì½”ë”© í…ŒìŠ¤íŠ¸',
            'interview': 'ë©´ì ‘ ì¤€ë¹„'
        };

        // ì½˜í…ì¸  íƒ€ì…ë³„ ì„¤ëª… ë§¤í•‘
        const typeDescriptions = {
            'quiz': 'Python, FastAPI ë“± ë‹¤ì–‘í•œ ì£¼ì œì˜ í€´ì¦ˆë¥¼ í’€ì–´ë³´ì„¸ìš”',
            'codingtest': 'ì‹¤ì „ê³¼ ê°™ì€ í™˜ê²½ì—ì„œ ì½”ë”© í…ŒìŠ¤íŠ¸ë¥¼ ì—°ìŠµí•´ë³´ì„¸ìš”',
            'interview': 'ì‹¤ì œ ë©´ì ‘ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ì§ˆë¬¸ë“¤ì„ ì—°ìŠµí•´ë³´ì„¸ìš”'
        };

        // API í˜¸ì¶œ ë° ì¹´ë“œ ìƒì„±
        fetch('http://localhost:8000/api/content_types', {
                headers: {
                    'Authorization': `Bearer ${localStorage.getItem('token')}`
                }
            })
            .then(response => response.json())
            .then(data => {
                const grid = document.getElementById('contentTypeGrid');

                data.forEach(type => {
                    const card = document.createElement('a');
                    // quiz íƒ€ì…ë§Œ í™œì„±í™”, ë‚˜ë¨¸ì§€ëŠ” disabled ì²˜ë¦¬
                    const isEnabled = type.name === 'quiz';
                    card.className = `content-type-card ${!isEnabled ? 'disabled' : ''}`;
                    card.href = isEnabled ? `subject_list.html?content_type_id=${type.id}` : '#';

                    card.innerHTML = `
                        <div class="card-icon">${typeIcons[type.name] || 'ğŸ“¦'}</div>
                        <h3>${typeNames[type.name] || type.name}</h3>
                        <p>${typeDescriptions[type.name] || type.description}</p>
                        <span class="card-badge ${!isEnabled ? 'coming-soon' : ''}">${isEnabled ? 'í˜„ì¬ ì´ìš© ê°€ëŠ¥' : 'Coming Soon'}</span>
                    `;

                    grid.appendChild(card);
                });
            })
            .catch(error => {
                console.error('Error fetching content types:', error);
                // ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
                const grid = document.getElementById('contentTypeGrid');
                grid.innerHTML = `
                    <div class="error-message">
                        <p>ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>
                        <p>ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
                    </div>
                `;
            });
    </script>
</body>

</html>